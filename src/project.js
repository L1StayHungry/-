window.__require=function t(i,e,n){function o(c,s){if(!e[c]){if(!i[c]){var l=c.split("/");if(l=l[l.length-1],!i[l]){var h="function"==typeof __require&&__require;if(!s&&h)return h(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+c+"'")}}var r=e[c]={exports:{}};i[c][0].call(r.exports,function(t){return o(i[c][1][t]||t)},r,r.exports,t,i,e,n)}return e[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({BlackBall:[function(t,i,e){"use strict";cc._RF.push(i,"00e9db/XDpHArnng+sTOpEj","BlackBall"),cc.Class({extends:cc.Component,properties:{min_R:20,JianTouPrefab:{default:null,type:cc.Prefab},RealhitballBlackPrefab:{default:null,type:cc.Prefab}},onLoad:function(){this.spawnNewJianTou()},spawnNewJianTou:function(){this.node.setPosition(this.getNewBallPosition()),this.JianTou=cc.instantiate(this.JianTouPrefab),this.node.parent.addChild(this.JianTou),this.JianTou.active=!1,this.RealhitballBlack=cc.instantiate(this.RealhitballBlackPrefab),this.node.parent.addChild(this.RealhitballBlack),this.RealhitballBlack.active=!1,this.RealhitballBlack_inst=this.RealhitballBlack.getComponent("RealhitballBlack"),this.node.opacity=0,this.node.runAction(cc.fadeIn(1))},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){var i=t.getLocation(),e=this.node.parent.convertToNodeSpaceAR(i),n=this.node.getPosition(),o=e.sub(n),a=o.mag();o.x=-o.x,o.y=-o.y;var c=180*Math.atan2(o.y,o.x)/Math.PI;if(c=90-c,this.JianTou.rotation=c,a<this.min_R)return this.JianTou.active=!1,this.RealhitballBlack.active=!1,void(this.node.opacity=200);this.JianTou.active=!0,this.RealhitballBlack.active=!0,this.node.opacity=100;var s=n,l=.5*this.JianTou.height;s.x+=(l+a/5)*o.x/a,s.y+=(l+a/5)*o.y/a,this.JianTou.setPosition(s);var h=e;this.RealhitballBlack.setPosition(h)}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_END,function(t){!1!==this.RealhitballBlack.active&&(this.node.active=!1,this.JianTou.active=!1,this.RealhitballBlack_inst.shoot_to(this.node.getPosition()))}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){!1!==this.RealhitballBlack.active&&(this.node.active=!1,this.JianTou.active=!1,this.RealhitballBlack_inst.shoot_to(this.node.getPosition()))}.bind(this),this)},getNewBallPosition:function(){for(var t=0,i=0,e=this.node.parent.parent.width/2-50,n=this.node.parent.parent.height/2-100;t>=-180&&t<=180&&i>=-180&&i<=180;)t=2*(Math.random()-.5)*e,i=2*(Math.random()-.5)*n;return cc.v2(t,i)},update:function(t){}}),cc._RF.pop()},{}],Game:[function(t,i,e){"use strict";cc._RF.push(i,"71c3c7+WdxM/oDnEE0fGfCA","Game"),cc.Class({extends:cc.Component,properties:{WhiteBallPrefab:{default:null,type:cc.Prefab},BlackBallPrefab:{default:null,type:cc.Prefab},YuanPanNode:{default:null,type:cc.Node},pointNode:{default:null,type:cc.Node},overpoint:0,ballnum:4,ballchild:{default:null,type:cc.Node},gameAudio:{default:null,type:cc.AudioClip},timePre:{default:null,type:cc.Prefab},time:0},onLoad:function(){Global.point=0,this.node.opacity=0,this.node.runAction(cc.fadeIn(1)),cc.director.getPhysicsManager().enabled=!0,this.spawnNewWhiteBall(),this.timePro=cc.instantiate(this.timePre),this.node.addChild(this.timePro),Global.overpoint=this.overpoint,this.current=cc.audioEngine.play(this.gameAudio,!0,1),this.schedule(this.doCountdownTime,1),this.timecount=this.time},spawnNewWhiteBall:function(){for(var t=0;t<this.ballnum;t++){var i=cc.instantiate(this.WhiteBallPrefab);this.ballchild.addChild(i)}for(t=0;t<this.ballnum;t++){i=cc.instantiate(this.BlackBallPrefab);this.ballchild.addChild(i)}},start:function(){},regame:function(){this.unschedule(this.doCountdownTime),this.timecount=this.time,this.ballchild.removeAllChildren(),this.spawnNewWhiteBall(),this.YuanPanNode.getComponent("YuanPan").w_speed=120,this.pointNode.getComponent(cc.Label).string=0,Global.point=0,Global.overpoint=this.overpoint,this.timePro.getComponent(cc.ProgressBar).progress=1,this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5))),this.schedule(this.doCountdownTime,1)},doCountdownTime:function(){this.time<=0?this.timePro.getComponent(cc.ProgressBar).progress=0:(this.timePro.getComponent(cc.ProgressBar).progress-=1/this.time,this.timecount--)},returntoFrontP:function(){this.node.runAction(cc.sequence(cc.fadeOut(1),cc.callFunc(function(){cc.director.loadScene("startgame")})))},pointTest:function(){if(this.pointNode.getComponent(cc.Label).string=Global.point,(Global.point<0||Global.point>=this.overpoint||this.timecount<=0)&&(cc.director.loadScene("endgame"),Global.point>=this.overpoint)){var t=this.time-this.timecount;wx.postMessage({use_time:t,messageType:"postNewTime"})}},update:function(t){this.YuanPanNode.getComponent("YuanPan").w_speed+=.3,this.point=Global.point,this.pointTest()},onDestroy:function(){cc.audioEngine.stop(this.current)}}),cc._RF.pop()},{}],JianTou:[function(t,i,e){"use strict";cc._RF.push(i,"4ebfeAbifxMr5vuQaoRoFvp","JianTou"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],RealhitballBlack:[function(t,i,e){"use strict";cc._RF.push(i,"137f2Ow385DbLj/ZKRF9YPB","RealhitballBlack"),cc.Class({extends:cc.Component,properties:{power:6,show_point:{default:null,type:cc.Prefab},BlackBallPrefab:{default:null,type:cc.Prefab},getscoreAudio:{default:null,type:cc.AudioClip},losescoreAudio:{default:null,type:cc.AudioClip}},start:function(){this.body=this.getComponent(cc.RigidBody)},shoot_to:function(t){var i=this.node.getPosition(),e=t.sub(i),n=.5*this.node.width,o=e.mag(),a=o-n;this.body.applyLinearImpulse(cc.p(e.x/o*this.power*a,e.y/o*this.power*a),this.node.convertToWorldSpaceAR(cc.p(0,0)),!0)},onBeginContact:function(t,i,e){if(3!==e.tag){if(2===e.tag){this.node.active=!1;n=cc.instantiate(this.show_point);return cc.audioEngine.playEffect(this.losescoreAudio,!1),n.setPosition(this.node.getPosition()),n.getComponent(cc.Label).string="-1",Global.point-=1,void this.node.parent.addChild(n)}}else{this.node.active=!1;var n=cc.instantiate(this.show_point);cc.audioEngine.playEffect(this.getscoreAudio,!1),n.setPosition(this.node.getPosition()),n.getComponent(cc.Label).string="+1",Global.point+=1,this.node.parent.addChild(n);var o=cc.instantiate(this.BlackBallPrefab);this.node.parent.addChild(o)}}}),cc._RF.pop()},{}],Realhitball:[function(t,i,e){"use strict";cc._RF.push(i,"6f589Rd8tVDU6t0kP0Yjq98","Realhitball"),cc.Class({extends:cc.Component,properties:{power:6,show_point:{default:null,type:cc.Prefab},WhiteBallPrefab:{default:null,type:cc.Prefab},getscoreAudio:{default:null,type:cc.AudioClip},losescoreAudio:{default:null,type:cc.AudioClip}},start:function(){this.body=this.getComponent(cc.RigidBody)},shoot_to:function(t){var i=this.node.getPosition(),e=t.sub(i),n=.5*this.node.width,o=e.mag(),a=o-n;this.body.applyLinearImpulse(cc.p(e.x/o*this.power*a,e.y/o*this.power*a),this.node.convertToWorldSpaceAR(cc.p(0,0)),!0)},onBeginContact:function(t,i,e){if(2!==e.tag){if(3===e.tag){this.node.active=!1;n=cc.instantiate(this.show_point);return cc.audioEngine.playEffect(this.losescoreAudio,!1),n.setPosition(this.node.getPosition()),n.getComponent(cc.Label).string="-1",Global.point-=1,void this.node.parent.addChild(n)}}else{this.node.active=!1;var n=cc.instantiate(this.show_point);cc.audioEngine.playEffect(this.getscoreAudio,!1),n.setPosition(this.node.getPosition()),n.getComponent(cc.Label).string="+1",Global.point+=1,this.node.parent.addChild(n);var o=cc.instantiate(this.WhiteBallPrefab);this.node.parent.addChild(o)}}}),cc._RF.pop()},{}],Show:[function(t,i,e){"use strict";cc._RF.push(i,"9d155oz4q9FPrgn29Hj5UJs","Show"),cc.Class({extends:cc.Component,properties:{},start:function(){this.scheduleOnce(this.destoryhp.bind(this),0)},destoryhp:function(){var t=cc.sequence(cc.fadeOut(.5),cc.callFunc(this.removefp,this));this.node.runAction(t)},removefp:function(){this.node.removeFromParent()}}),cc._RF.pop()},{}],WhiteBall:[function(t,i,e){"use strict";cc._RF.push(i,"083efmxyT1EjLUuU4jGMUfW","WhiteBall"),cc.Class({extends:cc.Component,properties:{min_R:20,JianTouPrefab:{default:null,type:cc.Prefab},RealhitballPrefab:{default:null,type:cc.Prefab}},onLoad:function(){this.spawnNewJianTou()},spawnNewJianTou:function(){this.node.setPosition(this.getNewBallPosition()),this.JianTou=cc.instantiate(this.JianTouPrefab),this.node.parent.addChild(this.JianTou),this.JianTou.active=!1,this.Realhitball=cc.instantiate(this.RealhitballPrefab),this.node.parent.addChild(this.Realhitball),this.Realhitball.active=!1,this.Realhitball_inst=this.Realhitball.getComponent("Realhitball"),this.node.opacity=0,this.node.runAction(cc.fadeIn(1))},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){var i=t.getLocation(),e=this.node.parent.convertToNodeSpaceAR(i),n=this.node.getPosition(),o=e.sub(n),a=o.mag();o.x=-o.x,o.y=-o.y;var c=180*Math.atan2(o.y,o.x)/Math.PI;if(c=90-c,this.JianTou.rotation=c,a<this.min_R)return this.JianTou.active=!1,this.Realhitball.active=!1,void(this.node.opacity=200);this.JianTou.active=!0,this.Realhitball.active=!0,this.node.opacity=100;var s=n,l=.5*this.JianTou.height;s.x+=(l+a/5)*o.x/a,s.y+=(l+a/5)*o.y/a,this.JianTou.setPosition(s);var h=e;this.Realhitball.setPosition(h)}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_END,function(t){!1!==this.Realhitball.active&&(this.node.active=!1,this.JianTou.active=!1,this.Realhitball_inst.shoot_to(this.node.getPosition()))}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){!1!==this.Realhitball.active&&(this.node.active=!1,this.JianTou.active=!1,this.Realhitball_inst.shoot_to(this.node.getPosition()))}.bind(this),this)},getNewBallPosition:function(){for(var t=0,i=0,e=this.node.parent.parent.width/2-50,n=this.node.parent.parent.height/2-100;t>=-180&&t<=180&&i>=-180&&i<=180;)t=2*(Math.random()-.5)*e,i=2*(Math.random()-.5)*n;return cc.v2(t,i)},update:function(t){}}),cc._RF.pop()},{}],YuanPan:[function(t,i,e){"use strict";cc._RF.push(i,"a841a/etE1L+ZG8QHUeP5Gz","YuanPan"),cc.Class({extends:cc.Component,properties:{w_speed:130},start:function(){},update:function(t){var i=this.w_speed*t;for(this.node.rotation+=i;this.node.rotation>=360;)this.node.rotation-=360}}),cc._RF.pop()},{}],alter:[function(t,i,e){"use strict";cc._RF.push(i,"2c18aH7CmJKS6cuvV0xbp8B","alter"),cc.Class({extends:cc.Component,properties:{},start:function(){},xiaoshi:function(){for(var t=0;t<this.node.parent.children.length;t++)this.node.parent.children[t].active=!0;this.node.active=!1,this.node.removeFromParent()}}),cc._RF.pop()},{}],endgame:[function(t,i,e){"use strict";cc._RF.push(i,"86ddarwl31EBYBgo43hvKI+","endgame"),cc.Class({extends:cc.Component,properties:{words:{default:null,type:cc.Node},startgameAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.node.opacity=0,this.node.runAction(cc.fadeIn(1)),this.current=cc.audioEngine.play(this.startgameAudio,!0,1)},start:function(){Global.point<0||Global.point<Global.overpoint?this.words.getComponent(cc.Label).string="\u6311\u6218\u5931\u8d25":Global.point>=Global.overpoint&&(this.words.getComponent(cc.Label).string="\u6311\u6218\u6210\u529f\uff01")},restart:function(){Global.point=0,this.node.runAction(cc.sequence(cc.fadeOut(1),cc.callFunc(function(){cc.director.loadScene("game")})))},onDestroy:function(){cc.audioEngine.stop(this.current)}}),cc._RF.pop()},{}],global:[function(t,i,e){"use strict";cc._RF.push(i,"4972a0j6ENEoY3+kFY08lB0","global"),window.Global={point:0,overpoint:0},cc._RF.pop()},{}],startgame:[function(t,i,e){"use strict";cc._RF.push(i,"d8e13jlUWRMlZwSZymbSU5e","startgame"),cc.Class({extends:cc.Component,properties:{alterPre:{default:null,type:cc.Prefab},startgameAudio:{default:null,type:cc.AudioClip},wxSubContextView:{default:null,type:cc.Node},avatar:{default:null,type:cc.Sprite},work_score:{default:null,type:cc.Node}},onLoad:function(){this.node.opacity=0,this.node.runAction(cc.fadeIn(1)),this.alter=cc.instantiate(this.alterPre),this.current=cc.audioEngine.play(this.startgameAudio,!0,1)},start:function(){this.initAction(),this.initUserInfoButton()},initAction:function(){this._isShow=!1,this._showAction=cc.moveTo(.5,this.wxSubContextView.x,0),this._hideAction=cc.moveTo(.5,this.wxSubContextView.x,1300),this.work_score.on("touchstart",this.onClick,this)},initUserInfoButton:function(){var t=this;if("undefined"!=typeof wx){var i=wx.getSystemInfoSync(),e=i.windowWidth,n=i.windowHeight,o=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:e,height:n,lineHeight:40,backgroundColor:"#00000000",color:"#00000000",textAlign:"center",fontSize:10,borderRadius:4}});o.onTap(function(i){var e=i.userInfo;e?(cc.loader.load({url:e.avatarUrl,type:"png"},function(i,e){i?console.error(i):t.avatar.spriteFrame=new cc.SpriteFrame(e)}),wx.getOpenDataContext().postMessage({message:"User info get success.",messageType:"unit_message"}),o.hide(),o.destroy()):t.tips.string=i.errMsg})}},onClick:function(){this._isShow=!this._isShow,this._isShow?(wx.getOpenDataContext().postMessage({messageType:"update_wxSubContextView"}),this.wxSubContextView.runAction(this._showAction)):this.wxSubContextView.runAction(this._hideAction)},startgame:function(){this.node.runAction(cc.sequence(cc.fadeOut(1),cc.callFunc(function(){cc.director.loadScene("game")})))},showrule:function(){this.alter.active=!0;for(var t=0;t<this.node.children.length;t++)"bg"!=this.node.children[t].name&&"Main Camera"!=this.node.children[t].name&&(this.node.children[t].active=!1);this.node.addChild(this.alter)},onDestroy:function(){cc.audioEngine.stop(this.current)}}),cc._RF.pop()},{}]},{},["BlackBall","Game","JianTou","Realhitball","RealhitballBlack","Show","WhiteBall","YuanPan","alter","endgame","global","startgame"]);